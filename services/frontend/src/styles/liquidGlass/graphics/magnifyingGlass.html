<!-- *********************************************************************** -->
<!--                                                                         -->
<!--                                                      :::      ::::::::  -->
<!-- magnifyingGlass.html                               :+:      :+:    :+:  -->
<!--                                                  +:+ +:+         +:+    -->
<!-- By: jeportie <jeportie@42.fr>                  +#+  +:+       +#+       -->
<!--                                              +#+#+#+#+#+   +#+          -->
<!-- Created: 2025/10/25 17:53:09 by jeportie          #+#    #+#            -->
<!-- Updated: 2025/10/25 18:29:14 by jeportie         ###   ########.fr      -->
<!--                                                                         -->
<!-- *********************************************************************** -->

<div id="magnifier-root" class="magnifier-container">
    <img class="background"
        src="https://images.unsplash.com/photo-1579380656108-f98e4df8ea62?q=80&w=800&auto=format&fit=crop" width="800"
        height="460" />

    <!-- empty lens: we use CSS backdrop-filter with our SVG filter -->
    <div class="lens"></div>
</div>

<div class="controls">
    <label>
        Specular Opacity
        <input id="specularOpacity" type="range" min="0" max="1" step="0.01" value="0.5" />
    </label>
    <label>
        Specular Saturation
        <input id="specularSaturation" type="range" min="0" max="50" step="1" value="9" />
    </label>
    <label>
        Refraction Level
        <input id="refractionBase" type="range" min="0" max="1" step="0.01" value="1" />
    </label>
    <label>
        Magnify Strength
        <input id="magnifyScale" type="range" min="0" max="64" step="1" value="24" />
    </label>
</div>

<script type="module">
    import {setupMagnifyingGlass} from "./bundle.js";
    setupMagnifyingGlass(document.getElementById("magnifier-root"));
</script>

<style>
    .magnifier-container {
        position: relative;
        width: 800px;
        height: 460px;
        border-radius: 16px;
        overflow: hidden;
        background: #000;
    }

    .background {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        user-select: none;
        pointer-events: none;
    }

    .lens {
        position: absolute;
        top: 150px;
        left: 200px;
        width: 210px;
        height: 150px;
        border-radius: 75px;
        /* âœ¨ real refraction of what's behind */
        backdrop-filter: url(#liquid);
        /* nice glass frame */
        box-shadow:
            0 4px 24px rgba(0, 0, 0, 0.25),
            inset 0 0 24px rgba(255, 255, 255, 0.12),
            inset 0 0 18px rgba(0, 0, 0, 0.12);
        cursor: grab;
        transition: box-shadow .2s ease;
        z-index: 1;
    }

    .controls {
        margin-top: 12px;
        font-family: sans-serif;
        font-size: 13px;
        display: flex;
        flex-direction: column;
        gap: 6px;
    }
</style>
