<!-- *********************************************************************** -->
<!--                                                                         -->
<!--                                                      :::      ::::::::  -->
<!-- settings.html                                      :+:      :+:    :+:  -->
<!--                                                  +:+ +:+         +:+    -->
<!-- By: jeportie <jeportie@42.fr>                  +#+  +:+       +#+       -->
<!--                                              +#+#+#+#+#+   +#+          -->
<!-- Created: 2025/10/27 22:40:51 by jeportie          #+#    #+#            -->
<!-- Updated: 2025/10/29 15:21:59 by jeportie         ###   ########.fr      -->
<!--                                                                         -->
<!-- *********************************************************************** -->


<section id="settings-view" class="app-view-zone">
    <header class="mb-8">
        <h1 class="app-title">Settings</h1>
        <p class="app-text mt-1">
            Security & sessions — manage two-factor authentication, passwords, and connected devices.
        </p>
    </header>

    <ol class="app-dotlist">
        <!-- Two-Factor Authentication -->
        <li class="app-dotitem">
            <div class="app-dotitem-body">
                <div>
                    <h3 class="app-item-title">Two-Factor Authentication (2FA)</h3>
                    <p class="app-item-desc">
                        Add an extra layer of security using an authenticator app.
                    </p>
                </div>
                <div class="app-actions">
                    <button id="btn-2fa-toggle" class="app-btn-primary">Enable</button>
                </div>
            </div>
        </li>

        <!-- Change Password -->
        <li class="app-dotitem">
            <div class="app-dotitem-body">
                <div>
                    <h3 class="app-item-title">Change Password</h3>
                    <p class="app-item-desc">
                        Update your account password to keep your account secure.
                    </p>
                </div>
                <div class="app-actions">
                    <button id="btn-open-pwd" class="app-btn-primary">Change</button>
                </div>
            </div>
        </li>


        <!-- Active Sessions -->
        <li class="app-dotitem">
            <div class="app-dotitem-body flex flex-col">
                <div>
                    <h3 class="app-item-title">Active Sessions</h3>
                    <p class="app-item-desc">
                        See where you’re logged in and revoke any unfamiliar sessions.
                    </p>
                </div>

                <!-- Table directly below paragraph -->
                <div class="overflow-visible rounded-md border border-neutral-700/70 mt-4 w-full">
                    <table class="w-full text-left">
                        <thead class="bg-neutral-800/60 text-neutral-300 text-xs uppercase">
                            <tr>
                                <th class="px-3 py-2 w-6">Status</th>
                                <th class="px-3 py-2">Device</th>
                                <th class="px-3 py-2">IP / Location</th>
                                <th class="px-3 py-2">Last Active</th>
                                <th class="px-3 py-2">Expires at</th>
                                <th class="px-3 py-2 text-right">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="sessions-table-body" class="bg-neutral-900/50 text-neutral-100 text-sm"></tbody>
                    </table>
                </div>
            </div>
        </li>

    </ol>

    <!-- Where modals will be mounted dynamically -->
    <div id="settings-cards"></div>

    <template id="tpl-2fa-card">
        <div class="app-modal-card">
            <div class="flex items-center justify-between mb-4">
                <h3 class="app-card-title">Two-Factor Authentication</h3>
                <span id="f2a-status-tag"
                    class="inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs bg-red-500/15 text-red-300 border border-red-400/20">Disabled</span>
            </div>

            <div class="flex gap-3 mb-4">
                <button id="f2a-enable-btn" class="app-btn-primary w-full">
                    Enable
                </button>
                <button id="f2a-disable-btn" class="app-btn-secondary w-full">
                    Disable
                </button>
            </div>

            <!-- QR + OTP -->
            <div id="f2a-qr-wrap" class="hidden mt-6">
                <p class="app-text mb-4">
                    Scan this QR code with your authenticator app, then enter the code below.
                </p>
                <div class="flex flex-col items-center gap-4">
                    <img id="f2a-qr" class="ui-qr w-40 h-40 rounded-md border border-white/10" />
                    <otp-input id="f2a-code" digits="6" class="mt-2"></otp-input>
                </div>
            </div>

            <!-- Backup Codes -->
            <div id="f2a-backup-wrap" class="hidden mt-6">
                <p class="text-sm font-semibold text-yellow-300/90 mb-2">
                    ⚠️ Save these backup codes — they will not be shown again.
                </p>
                <div class="overflow-visible rounded-md border border-neutral-700/70 mb-3">
                    <table class="w-full text-left">
                        <thead class="bg-neutral-800/60 text-neutral-300">
                            <tr>
                                <th class="px-3 py-2">#</th>
                                <th class="px-3 py-2">Backup Code</th>
                            </tr>
                        </thead>
                        <tbody id="f2a-backup-table" class="bg-neutral-900/50 text-neutral-100"></tbody>
                    </table>
                </div>
                <button id="f2a-backup-download" class="app-btn-primary w-full">
                    ⬇️ Download Backup Codes
                </button>
            </div>
        </div>
    </template>

    <template id="tpl-pwd-card">
        <div class="app-modal-card">

            <h3 class="app-card-title mb-4">Change Password</h3>
            <p id="pwd-hint" class="app-text mb-4">
                Use a long passphrase you don’t reuse elsewhere.
            </p>

            <form id="pwd-form" class="grid gap-3">
                <div class="app-field">
                    <label class="app-label">Current Password</label>
                    <input id="old-pwd" class="app-input" type="password" autocomplete="current-password"
                        placeholder="Current password" />
                </div>
                <div class="app-field">
                    <label class="app-label">New Password</label>
                    <input id="new-pwd" class="app-input" type="password" autocomplete="new-password"
                        placeholder="New password" />
                </div>
                <div class="app-field">
                    <label class="app-label">Confirm New Password</label>
                    <input id="confirm-pwd" class="app-input" type="password" autocomplete="new-password"
                        placeholder="Confirm new password" />
                </div>
                <button class="app-btn-primary mt-2 w-full">Save Password</button>
            </form>
        </div>
    </template>
</section>
